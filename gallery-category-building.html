<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>building | GALLERY CATEGORY | THE PDF FILES</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    :root{
      --bg:#0f1218; --surface:#171c24; --surface-2:#1f2631; --border:#2d3643;
      --text:#e8edf4; --muted:#92a0b4; --accent:#1a8fc4; --warm:#d35d2c;
      --sans:'Space Grotesk',system-ui,sans-serif; --mono:'IBM Plex Mono',monospace;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:var(--sans); color:var(--text);
      background:radial-gradient(circle at 12% 0%,#141c24 0%,#0f1218 55%);
    }
    a{color:var(--accent)}
    .back-link{
      display:inline-block;margin:1rem;padding:.5rem 1rem;border:1px solid var(--border);border-radius:.5rem;
      color:var(--muted);font:600 .78rem var(--mono);text-decoration:none;
    }
    .back-link:hover{color:var(--accent);border-color:var(--accent)}
    .hero{
      border-bottom:2px solid var(--warm);
      background:linear-gradient(170deg,#1a0e0a 0%,#150d08 45%,#0f1218 100%);
      padding:2rem 1rem 1.2rem; text-align:center;
    }
    .hero h1{
      margin:0; font-size:clamp(1.5rem,4vw,2.35rem);
      background:linear-gradient(90deg,var(--warm),#f0a060);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      letter-spacing:.03em;
    }
    .hero p{margin:.6rem auto 0;max-width:88ch;color:var(--muted);font-size:.88rem}
    .hero .count{
      display:inline-block;margin-top:.6rem;padding:.25rem .7rem;border-radius:999px;
      background:rgba(211,93,44,.15);border:1px solid rgba(211,93,44,.4);
      font:700 .85rem var(--mono);color:#f0a060;
    }
    .hero-nav{
      max-width:980px;margin:.9rem auto 0;display:grid;gap:.5rem;
      grid-template-columns:repeat(auto-fit,minmax(170px,1fr));
    }
    .hero-btn{
      display:inline-flex;align-items:center;justify-content:center;
      min-height:2.4rem;padding:.35rem .55rem;border-radius:.5rem;
      border:1px solid rgba(255,255,255,.2);font:600 .72rem var(--mono);letter-spacing:.02em;
      color:#fff;text-decoration:none;
    }
    .hero-btn:hover{filter:saturate(1.08) brightness(1.04);text-decoration:none}
    .wrap{max-width:1400px;margin:0 auto;padding:1rem}
    .panel{
      background:var(--surface);border:1px solid var(--border);border-radius:.85rem;padding:.9rem;margin-bottom:1rem;
    }
    .controls{
      display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;
    }
    .controls input,.controls select{
      border:1px solid var(--border);border-radius:.55rem;
      background:var(--surface-2);color:var(--text);padding:.52rem .58rem;
      font:500 .78rem var(--mono);
    }
    .controls input{flex:1 1 240px;min-width:200px}
    .controls select{flex:0 0 auto;min-width:140px}
    .meta{margin:.55rem 0 0;color:var(--muted);font:500 .74rem var(--mono);}
    .grid{
      display:grid;gap:.6rem;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
    }
    .card{
      background:var(--surface);border:1px solid var(--border);border-radius:.65rem;overflow:hidden;
      transition:border-color .15s;
    }
    .card:hover{border-color:var(--accent)}
    .thumb-wrap{
      background:#0d1117;aspect-ratio:4/3;display:grid;place-items:center;overflow:hidden;
      cursor:pointer;
    }
    .thumb{
      max-width:100%;max-height:100%;display:block;object-fit:contain;
    }
    .body{padding:.5rem .55rem}
    .body .cat-label{
      display:inline-block;font:700 .62rem var(--mono);padding:.08rem .3rem;border-radius:.3rem;
      background:rgba(211,93,44,.12);border:1px solid rgba(211,93,44,.35);color:#f0a060;
      margin-bottom:.25rem;text-transform:uppercase;letter-spacing:.04em;
    }
    .body .efta{
      margin:0;font:500 .72rem var(--mono);color:var(--muted);word-break:break-all;
    }
    .body .tags{
      margin:.25rem 0 0;display:flex;flex-wrap:wrap;gap:.2rem;
    }
    .body .tag{
      font:500 .6rem var(--mono);padding:.05rem .25rem;border-radius:.25rem;
      border:1px solid var(--border);color:var(--muted);
    }
    .lightbox{
      position:fixed;inset:0;z-index:1000;background:rgba(0,0,0,.92);
      display:none;place-items:center;cursor:zoom-out;
    }
    .lightbox.open{display:grid}
    .lightbox img{
      max-width:95vw;max-height:92vh;object-fit:contain;border-radius:.5rem;
      box-shadow:0 0 60px rgba(0,0,0,.6);
    }
    .lightbox .lb-info{
      position:absolute;bottom:1rem;left:50%;transform:translateX(-50%);
      background:rgba(0,0,0,.7);padding:.4rem .8rem;border-radius:.5rem;
      font:600 .72rem var(--mono);color:var(--muted);text-align:center;
      max-width:90vw;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
    }
    .lightbox .lb-nav{
      position:absolute;top:50%;font-size:2.5rem;color:#fff;cursor:pointer;
      user-select:none;padding:.5rem;opacity:.5;transition:opacity .15s;
    }
    .lightbox .lb-nav:hover{opacity:1}
    .lightbox .lb-prev{left:1rem;transform:translateY(-50%)}
    .lightbox .lb-next{right:1rem;transform:translateY(-50%)}
    .empty{
      color:var(--muted);font:500 .8rem var(--mono);text-align:center;padding:2rem .6rem;
      border:1px dashed var(--border);border-radius:.7rem;background:var(--surface);
      grid-column:1/-1;
    }
    @media (max-width:620px){
      .grid{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}
    }
  </style>
</head>
<body>
  <script src="./nav.js"></script>
  <a class="back-link" href="./gallery-picks.html">&larr; BACK TO GALLERY PICKS</a>

  <header class="hero">
    <h1>CATEGORY GALLERY: building</h1>
    <p>
      Static category view generated from <code>gallery-picks-2026-02-16</code>.
      This page is pinned to one category and does not rely on URL query parameters.
    </p>
    <span class="count" id="heroCount">57 images</span>
    <nav class="hero-nav" aria-label="Category navigation">
      <a class="hero-btn" href="./index.html" style="background:linear-gradient(125deg,#5e4732,#3f2d1f)">HOME &rarr;</a>
      <a class="hero-btn" href="./images.html" style="background:linear-gradient(125deg,#1a8fc4,#156f98)">IMAGES PAGE &rarr;</a>
      <a class="hero-btn" href="./gallery-picks.html" style="background:linear-gradient(125deg,#7d4d00,#5d3900)">ALL GALLERY PICKS &rarr;</a>
      <a class="hero-btn" href="./handwritten-notes.html" style="background:linear-gradient(125deg,#4a6741,#344a2e)">HANDWRITTEN NOTES &rarr;</a>
    </nav>
  </header>

  <main class="wrap">
    <section class="panel">
      <div class="controls">
        <input id="q" type="search" placeholder="Search this category by EFTA, filename, tag..." autocomplete="off" spellcheck="false" />
        <select id="sortBy">
          <option value="rank">Sort: Default</option>
          <option value="efta">Sort: EFTA #</option>
        </select>
      </div>
      <p class="meta" id="meta">Loading category...</p>
    </section>

    <section id="grid" class="grid"></section>
  </main>

  <div class="lightbox" id="lightbox">
    <span class="lb-nav lb-prev" id="lbPrev">&lsaquo;</span>
    <span class="lb-nav lb-next" id="lbNext">&rsaquo;</span>
    <img id="lbImg" src="" alt="" />
    <div class="lb-info" id="lbInfo"></div>
  </div>

  <script>
    (function(){
      const CATEGORY = "building";
      const CATEGORY_KEY = CATEGORY.trim().toLowerCase();
      const INDEX_PATH = "./content/images/galleries/gallery-picks-2026-02-16/index.json";
      const state = { items:[], filtered:[], lbIdx:-1 };

      const el = {
        q: document.getElementById("q"),
        sortBy: document.getElementById("sortBy"),
        meta: document.getElementById("meta"),
        grid: document.getElementById("grid"),
        heroCount: document.getElementById("heroCount"),
        lightbox: document.getElementById("lightbox"),
        lbImg: document.getElementById("lbImg"),
        lbInfo: document.getElementById("lbInfo"),
        lbPrev: document.getElementById("lbPrev"),
        lbNext: document.getElementById("lbNext"),
      };

      function esc(s){ return String(s||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"); }
      function href(p){ return "./" + String(p||"").replace(/^\.?\//,"").split("/").map(s=>encodeURIComponent(decodeURIComponent(s))).join("/"); }

      function applyFilters(){
        const q = String(el.q.value||"").trim().toLowerCase();
        const sortBy = el.sortBy.value;

        let rows = state.items.filter(it => {
          if(q){
            const hay = [it.id, it.efta, it.source_pdf, (it.tags||[]).join(" "), it.category].join(" ").toLowerCase();
            if(!hay.includes(q)) return false;
          }
          return true;
        });

        rows.sort((a,b) => {
          if(sortBy==="efta") return String(a.efta||"").localeCompare(b.efta||"",undefined,{numeric:true});
          return Number(a.rank||0) - Number(b.rank||0);
        });

        state.filtered = rows;
        render();
      }

      function card(item, idx){
        const tags = (item.tags||[]).slice(0,5).map(t=>'<span class="tag">'+esc(t)+'</span>').join("");
        return (
          '<article class="card">' +
            '<div class="thumb-wrap" data-idx="'+idx+'">' +
              '<img class="thumb" loading="lazy" src="'+href(item.image_path)+'" alt="'+esc(item.id)+'" />' +
            '</div>' +
            '<div class="body">' +
              '<span class="cat-label">'+esc(item.category||"unknown")+'</span>' +
              '<p class="efta">'+esc(item.efta || item.id)+'</p>' +
              '<div class="tags">'+tags+'</div>' +
            '</div>' +
          '</article>'
        );
      }

      function render(){
        el.meta.textContent = 'Showing ' + state.filtered.length.toLocaleString() + ' of ' + state.items.length.toLocaleString() + ' images in "' + CATEGORY + '".';
        if(!state.filtered.length){
          el.grid.innerHTML = '<div class="empty">No images match current filters in this category.</div>';
          return;
        }
        el.grid.innerHTML = state.filtered.map(card).join("");
        el.grid.querySelectorAll(".thumb-wrap").forEach(wrap => {
          wrap.addEventListener("click", () => openLightbox(parseInt(wrap.dataset.idx,10)));
        });
      }

      function openLightbox(idx){
        if(idx<0||idx>=state.filtered.length) return;
        state.lbIdx = idx;
        const item = state.filtered[idx];
        el.lbImg.src = href(item.image_path);
        el.lbInfo.textContent = item.category + " - " + (item.efta||item.id) + " (" + (idx+1) + "/" + state.filtered.length + ")";
        el.lightbox.classList.add("open");
      }

      function closeLightbox(){
        el.lightbox.classList.remove("open");
        state.lbIdx = -1;
      }

      el.lightbox.addEventListener("click", e => { if(e.target===el.lightbox||e.target===el.lbImg) closeLightbox(); });
      el.lbPrev.addEventListener("click", e => { e.stopPropagation(); openLightbox(state.lbIdx-1); });
      el.lbNext.addEventListener("click", e => { e.stopPropagation(); openLightbox(state.lbIdx+1); });
      document.addEventListener("keydown", e => {
        if(!el.lightbox.classList.contains("open")) return;
        if(e.key==="Escape") closeLightbox();
        if(e.key==="ArrowLeft") openLightbox(state.lbIdx-1);
        if(e.key==="ArrowRight") openLightbox(state.lbIdx+1);
      });

      async function boot(){
        try{
          const resp = await fetch(INDEX_PATH, {cache:"no-store"});
          if(!resp.ok) throw new Error("HTTP " + resp.status);
          const data = await resp.json();
          const allItems = Array.isArray(data.items) ? data.items : [];
          state.items = allItems.filter(it => String(it.category||"").trim().toLowerCase() === CATEGORY_KEY);
          el.heroCount.textContent = state.items.length.toLocaleString() + " images";
          el.q.addEventListener("input", applyFilters);
          el.sortBy.addEventListener("change", applyFilters);
          applyFilters();
        }catch(err){
          el.meta.textContent = "Category failed to load.";
          el.grid.innerHTML = '<div class="empty">' + esc(err&&err.message?err.message:String(err)) + '</div>';
        }
      }

      boot();
    })();
  </script>
  <!-- generated_at: 2026-02-16T09:47:25.103945; category_total: 57; gallery_total: 682 -->
</body>
</html>


